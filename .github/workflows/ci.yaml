name: CI

on:
  # TODO:この辺は追って修正 
  push:
    branches: ["feature/github_actions"]
  workflow_dispatch:

jobs:
  build-and-test:
    name: Build and Test
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3
      - name: Create .env file
        env: 
          TEST_ENV: ${{ secrets.TEST_ENV }}
        run: |
          echo ${{ env.TEST_ENV }} | base64 -di > .env
          mv .env ./app
      - if: ${{ env.TEST_ENV != '' }}
        run: echo 'This step will only run if the secret has a value set.'
      - if: ${{ env.TEST_ENV == '' }}
        run: echo 'This step will only run if the secret does not have a value set.'
      - name: Check env
        run: |
          cd ./app
          ls -la
      # - name: Run Container
      #   run: docker-compose up -d
      # - name: Run test
      #   run: docker-compose exec -T app pytest
